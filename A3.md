# A3

## Problem

Alice and Bob play a game with a string of $n$ digits, each of which is restricted to be $0$, $1$, or $2$. Initially all the digits are $0$.

A **legal move** is to add or subtract $1$ from one digit to create a new string that has not appeared before. A player with no legal move loses, and the other player wins. Alice goes first, and the players alternate moves.

For each $n \ge 1$, determine which player has a strategy that guarantees winning.

## Submission

To determine which player has a winning strategy, we model the game as a graph game. The valid strings are vertices of a graph $G_n$, and an edge affects a transition between two strings if they differ by $\pm 1$ in exactly one digit. Since digits are restricted to $\{0, 1, 2\}$, the graph for a single digit is the path $P_3: 0 - 1 - 2$. The graph for a string of $n$ digits is the Cartesian product of $n$ copies of $P_3$, denoted $G_n = (P_3)^n$.

The game is played as follows:
1.  Start at vertex $s = (0, 0, \dots, 0)$.
2.  Alice and Bob alternately move to an adjacent vertex that has not been visited before.
3.  The last player to move wins (or equivalently, the first player unable to move loses).

This is the game of "Geography" played on $G_n$ starting at $s$. For a game played on a bipartite graph starting at vertex $v$, it is a known result that:
*   Alice (the first player) has a winning strategy if and only if $v$ belongs to **every** maximum matching of the graph.
*   Bob (the second player) has a winning strategy if and only if there exists a maximum matching that does **not** contain $v$.

First, we establish that $G_n$ is bipartite. The vertices can be partitioned into two sets, $V_{even}$ and $V_{odd}$, based on the parity of the sum of their digits. Since a legal move changes one digit by $\pm 1$, the sum of digits changes parity with every move. The starting vertex $s = (0, \dots, 0)$ has sum 0, so $s \in V_{even}$.

The sizes of the partitions are defined by the recurrence $e_n = e_{n-1} + 3^{n-1}$ and $o_n = 3^n - e_n$, with $e_0=1, o_0=0$. This yields $e_n = \frac{3^n+1}{2}$ and $o_n = \frac{3^n-1}{2}$. Thus, $|V_{even}| = |V_{odd}| + 1$. The maximum size of a matching is $|V_{odd}|$ (since each edge uses one from each set).

To determine the winner, we check if $s$ is covered by all maximum matchings. Since $|V_{even}| > |V_{odd}|$, if we can find a matching that covers all of $V_{odd}$ and all of $V_{even} \setminus \{s\}$, then $s$ is left exposed (unmatched). Such a matching would have size $|V_{odd}|$, making it a maximum matching. If such a matching exists, Bob wins.

We prove by induction that the graph $G_n \setminus \{s\}$ has a perfect matching for all $n \ge 1$.
*   **Base Case ($n=1$):** The vertices are $\{0, 1, 2\}$. $s=0$. $G_1 \setminus \{0\} = \{1, 2\}$. The edge $(1, 2)$ forms a perfect matching.
*   **Inductive Step:** Assume $G_{n-1} \setminus \{(0,\dots,0)\}$ has a perfect matching $M'$.
    We can decompose $G_n$ into three subgraphs (layers) based on the first digit: $L_0$ (digit 0), $L_1$ (digit 1), and $L_2$ (digit 2). Each layer is isomorphic to $G_{n-1}$. The starting vertex $s$ is in $L_0$.
    We construct a perfect matching on $G_n \setminus \{s\}$ as follows:
    1.  Use the matching $M'$ on the vertices of $L_0 \setminus \{s\}$. This covers all vertices in $L_0$ except $s$.
    2.  For $L_1$ and $L_2$, match every vertex $(1, x_2, \dots, x_n)$ in $L_1$ with the corresponding vertex $(2, x_2, \dots, x_n)$ in $L_2$. Since adjacency is defined by differing in one digit, these pairs form valid edges. This set of edges forms a perfect matching between $L_1$ and $L_2$.
    The union of these two sets of edges is a perfect matching of $G_n \setminus \{s\}$.

Since there exists a maximum matching that does not cover the starting vertex $s$, Bob has a winning strategy.

**Winning Strategy for Bob:**
Let $M$ be a maximum matching on $G_n$ that does not include $s$.
Whenever Alice moves to a vertex $u$, $u$ must be covered by $M$ (otherwise we could add the edge $(prev, u)$ to $M$, or find an augmenting path, contradicting that $M$ covers all possible vertices reachable from the unmatched set $V_{odd}$). Let $v$ be the vertex matched to $u$ in $M$. Bob moves to $v$.
This strategy ensures Bob always has a valid move to an unvisited vertex, while Alice will eventually run out of moves.

Answer: **Bob**
