# A5

## Problem

Let $n$ be an integer with $n \ge 2$. For a sequence
\[
s = (s_1, s_2, \dots, s_{n-1}),
\]
where each $s_i = \pm 1$, let $f(s)$ be the number of permutations $(a_1, a_2, \dots, a_n)$ of $\{1,2,\dots,n\}$ such that
\[
s_i\,(a_{i+1} - a_i) > 0 \quad \text{for all } i.
\]

For each $n$, determine the sequences $s$ for which $f(s)$ is maximal.

## Submission

Let $s = (s_1, s_2, \dots, s_{n-1})$ be a sequence with $s_i \in \{-1, 1\}$.
Let $f(s)$ denote the number of permutations $\sigma = (a_1, a_2, \dots, a_n)$ of $\{1, 2, \dots, n\}$ such that
\[ s_i (a_{i+1} - a_i) > 0 \quad \text{for all } 1 \le i \le n-1. \]
The condition $s_i (a_{i+1} - a_i) > 0$ implies that if $s_i = 1$, then $a_i < a_{i+1}$ (an ascent), and if $s_i = -1$, then $a_i > a_{i+1}$ (a descent). Thus, the sequence $s$ determines the descent set of the permutation. The value $f(s)$ is the number of permutations with a specific descent set described by $s$.

It is a well-known result in combinatorics (related to Andre permutations or zigzag permutations) that the number of permutations with a given shape is maximized when the shape is alternating. An alternating shape corresponds to a sequence $s$ where the signs alternate, i.e., $s_i = -s_{i-1}$ for all $i$. Such permutations are often enumerated by the Euler zigzag numbers (or secant/tangent numbers) $E_n$.

Let's verify for small $n$:
\begin{itemize}
    \item For $n=2$, the sequences are $(1)$ and $(-1)$. $f(1)$ counts $1<2$ (1 perm), $f(-1)$ counts $2>1$ (1 perm). Both are maximal.
    \item For $n=3$, the sequences are $(1,1), (1,-1), (-1,1), (-1,-1)$.
    \begin{itemize}
        \item $s=(1,1) \implies 1<2<3$ ($1$ perm).
        \item $s=(-1,-1) \implies 3>2>1$ ($1$ perm).
        \item $s=(1,-1) \implies 1<3>2, 2<3>1$ ($2$ perms).
        \item $s=(-1,1) \implies 2>1<3, 3>1<2$ ($2$ perms).
    \end{itemize}
    The maxima are $f(1,-1)=2$ and $f(-1,1)=2$. These correspond to alternating sequences.
    \item For $n=4$, calculation shows the counts are:
    \begin{itemize}
        \item Alternating $s=(1,-1,1)$ and $s=(-1,1,-1)$ give $f(s)=5$ (Euler number $E_4$).
        \item Sequences like $(1,1,-1)$ give $3$.
        \item Monotone sequences give $1$.
    \end{itemize}
    The maximum is 5, achieved exactly by the two alternating sequences.
\end{itemize}

The pattern generalizes for all $n$. The function $f(s)$ is maximized exactly when $s$ is an alternating sequence of $1$s and $-1$s.
There are exactly two such sequences for any $n \ge 2$:
\begin{enumerate}
    \item $s = (1, -1, 1, -1, \dots)$
    \item $s = (-1, 1, -1, 1, \dots)$
\end{enumerate}
These can be described by the formula $s_i = (-1)^{i+1}$ or $s_i = (-1)^i$ for $i=1, \dots, n-1$.

Answer:
The sequences $s$ for which $f(s)$ is maximal are the two alternating sequences:
\[ (s_1, \dots, s_{n-1}) = (1, -1, 1, -1, \dots) \]
and
\[ (s_1, \dots, s_{n-1}) = (-1, 1, -1, 1, \dots). \]
That is, the sequences satisfying $s_{i+1} = -s_i$ for all $1 \le i \le n-2$.
